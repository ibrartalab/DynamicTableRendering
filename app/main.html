<!DOCTYPE html>
<html lang="en">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Roboto"
    /> -->
    <link
      rel="stylesheet"
      href="./main.css"  
    />
  </head>
  <body>
    <!-- Loader Spinner -->
    <div class="progressBox"></div>
    <!-- Toast -->
    <div id="toast" class="hidden">Please enter text</div>

    <!-- Main Body -->
    <div class="container">
      <div class="textbox-container">
        <textarea
          class="textbox"
          rows="5"
          placeholder="Enter your text here..."
        ></textarea>
        <button class="button">Submit</button>
      </div>

      <table class="table" style="display: block; width: 100px">
        <thead>
          <!-- <tr>
            <th>No.</th>
            <th>Name</th>
            <th>Project</th>
            <th>Supervisor</th>
          </tr> -->
        </thead>
        <tbody>
          <!-- <tr>
            <td>1</td>
            <td>ImtiazImtiazImtiazImtiazImtiazImtiazImtiazImtiazImtiazImtiazImtiazImtiazImtiaz</td>
            <td>NFCO</td>
            <td>Sarmad</td>
          </tr>
          <tr>
            <td>2</td>
            <td>Younas</td>
            <td>ABCD</td>
            <td>Umer</td>
          </tr>
          <tr>
            <td>2</td>
            <td>Younas</td>
            <td>ABCD</td>
            <td>Umer</td>
          </tr> -->
        </tbody>
      </table>
    </div>
  </body>

  <script>
    //------------Data-----------------------
    

    

    
    //-------------------------------------------
    let table = document.querySelector("table");
    let btn = document.querySelector(".button");

    //Toaster error
    function toasterToggle() {
      let toaster = document.querySelector("#toast");
      toaster.classList.toggle("hidden");
    }

    btn.addEventListener("click", function () {
      let text = document.querySelector(".textbox");
      let thead = table.getElementsByTagName("thead")[0];
      let tbody = table.getElementsByTagName("tbody")[0];
      let loader = document.querySelector(".progressBox");

      loader.style.display = "block";

      //Add validation on textarea
      if (!text.value) {
        toasterToggle();
        loader.style.display = "none";
        return;
      }
      setTimeout(() => {
        loader.style.display = "none";

        if (text.value.includes("cctv")) {
          console.log("exist");

          // Clear existing headers
          thead.innerHTML = "";
          tbody.innerHTML = "";

          Object.keys(CCTV[0]).forEach((key) => {
            let th = document.createElement("th");
            th.innerHTML = key;
            thead.appendChild(th);
          });

          CCTV.forEach((item) => {
            const newRow = tbody.insertRow();
            Object.values(item).forEach((value) => {
              let cell = newRow.insertCell();
              cell.innerHTML = value;
            });

          
          });
        } else if (text.value.includes("redlight")) {
          console.log("exist");

          // Clear existing headers
          thead.innerHTML = "";
          tbody.innerHTML = "";
          Object.keys(REDLIGHT[0]).forEach((key) => {
            let th = document.createElement("th");
            th.innerHTML = key;
            thead.appendChild(th);
          });

          REDLIGHT.forEach((item) => {
            const newRow = tbody.insertRow();
            Object.values(item).forEach((value) => {
              let cell = newRow.insertCell();
              cell.innerHTML = value;
            });
          });
          
        } else {
          tbody.innerHTML = "Out of the scoop";
          tbody.style.fontSize = "15px";

          console.log("not exist");
        }
        text.value = " ";
      }, 1000);
    });
  </script>
</html>
